{%- extends 'lab/index.html.j2' -%}

{% block notebook_css %}
{{ super() }}
<style type="text/css">
pre {
  white-space: normal;
}
.code-line {
  display: flex;
  padding: 0 4px;
  line-height: 1.3;
}
.ln {
  min-width: 2.5em;
  text-align: right;
  color: #aaa;
  margin-right: 12px;
  border-right: 1px solid #ddd;
  padding-right: 8px;
  flex-shrink: 0;
  user-select: none;
}
.code-content {
  white-space: pre-wrap;
  word-wrap: break-word;
}
</style>
{% endblock notebook_css %}

{% block footer_js %}
{{ super() }}
<script>
document.querySelectorAll('.highlight pre').forEach(function(pre) {
    var lines = pre.innerHTML.replace(/\n$/, '').split('\n');
    pre.innerHTML = lines.map(function(line, i) {
        return '<span class="code-line">'
            + '<span class="ln">' + (i + 1) + '</span>'
            + '<span class="code-content">' + line + '</span>'
            + '</span>';
    }).join('');
});
</script>
{% endblock footer_js %}
